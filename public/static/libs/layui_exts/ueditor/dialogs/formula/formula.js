/*! UEditorPlus v2.0.0*/
function preg_quote(a,b){return(a+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(b||"")+"-]","g"),"\\$&")}var Formula={init:function(){Formula.initValue(),Formula.initEvent(),Formula.initSubmit()},render:function(){var a=$.trim($("#editor").val());if(!a)return void $("#preview").hide();a=encodeURIComponent(a);var b=editor.getOpt("formulaConfig"),c=b.imageUrlTemplate.replace(/\{\}/,a);$("#previewImage").attr("src",c),$("#preview").show()},initValue:function(){var a=editor.selection.getRange().getClosedNode();if(a&&null!==a.getAttribute("data-formula-image")){var b=a.getAttribute("data-formula-image");b&&($("#editor").val(decodeURIComponent(b)),Formula.render())}},initEvent:function(){var a=null;$("#editor").on("change keypress",function(){a&&clearTimeout(a),a=setTimeout(function(){Formula.render()},1e3)}),$("#inputDemo").on("click",function(){$("#editor").val("f(a) = \\frac{1}{2\\pi i} \\oint\\frac{f(z)}{z-a}dz"),Formula.render()})},initSubmit:function(){dialog.onok=function(){editor.execCommand("formula",$.trim($("#editor").val())),editor.fireEvent("saveScene")},dialog.oncancel=function(){}}};