layui.define("form",function(e){var t=layui.jquery,i=layui.form,a=[],n=function(){};n.prototype.init=function(){var e=this;t("select[multiple]").each(function(i,n){var l=t(this),c=[];l.find("option:selected").each(function(){c.push(t(this).val())}),l.next().addClass("multi").find(".layui-select-title").click(function(){a[i]&&t(this).find("input").val(a[i].join(","))}).next().find("dd").each(function(){var a=t(this),n=a.hasClass("layui-this")||t.inArray(a.attr("lay-value"),c)>-1?"checked":"",r=a.text(),o=""===a.attr("lay-value")?"disabled":"";a.html('<input type="checkbox" lay-skin="primary" title="'+r+'" '+n+" "+o+">"),e.selected(i,l,a)}).click(function(a){var n=t(this);if("dd"==a.target.localName&&""!==n.attr("lay-value")){var c=n.find(".layui-form-checkbox").toggleClass("layui-form-checked").hasClass("layui-form-checked");n.find("input").prop("checked",c)}n.parents(".layui-form-select").addClass("layui-form-selected"),e.selected(i,l,n)})}),i.render("checkbox")},n.prototype.selected=function(e,i,n){a[e]=[],i.find("option").prop("selected",!1),n.parents("dl").find("[type=checkbox]:checked").each(function(){var n=t(this).parent().attr("lay-value");i.find("option[value="+n+"]").prop("selected",!0),a[e].push(t(this).attr("title"))}),n.parents("dl").prev().find("input").val(a[e].join(","))},n.prototype.render=function(e,t){i.render(e,t),this.init()};var l=new n;l.init(),e("multiSelect",l)});